{"ast":null,"code":"import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/Users/julietgavison/Desktop/potatoes-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/julietgavison/Desktop/potatoes-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/julietgavison/Desktop/potatoes-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext}from'react';import{Button,Card,ListGroup}from'react-bootstrap';import TripCardModal from'../TripCardModal/TripCardModal';import'./tripCard.css';import{UserContext}from'../../contexts/UserContext';import axios from'axios';import{baseURL}from'../../App';export default function TripCard(props){var _useContext=useContext(UserContext),currentUser=_useContext.currentUser;var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),modalShow=_React$useState2[0],setModalShow=_React$useState2[1];var _props$trip=props.trip,_id=_props$trip._id,area=_props$trip.area,time=_props$trip.time,store=_props$trip.store,quantity=_props$trip.quantity,name=_props$trip.name,requests=_props$trip.requests,date=_props$trip.date,email=_props$trip.email;function handleAccept(requestId){var updateReqObject={acceptRequest:true,tripId:_id,requestId:requestId};console.log('object',updateReqObject);sendRequest(updateReqObject);}function handleDeny(requestId){var updateReqObject={acceptRequest:false,tripId:_id,requestId:requestId};console.log('object',updateReqObject);sendRequest(updateReqObject);}var sendRequest=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(updateReqObject){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.put(\"\".concat(baseURL,\"/api/handleAccept\"),updateReqObject);case 2:res=_context.sent;console.log(res);case 4:case\"end\":return _context.stop();}}},_callee);}));return function sendRequest(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(Card,{className:\"m-3 tripCard\",style:{width:'18rem'},children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsxs(Card.Title,{children:[name,\"'s trip\"]}),/*#__PURE__*/_jsxs(Card.Subtitle,{className:\"mb-2 text-muted\",children:[\"Area: \",area]}),/*#__PURE__*/_jsxs(Card.Text,{children:[\"Store: \",/*#__PURE__*/_jsx(\"b\",{children:store})]}),/*#__PURE__*/_jsxs(Card.Text,{children:[\"Time:\",/*#__PURE__*/_jsxs(\"b\",{children:[time,\", \",date]})]}),/*#__PURE__*/_jsxs(Card.Text,{children:[\"Able to carry: \",/*#__PURE__*/_jsx(\"b\",{children:quantity})]}),/*#__PURE__*/_jsx(Button,{className:\"buttons\",onClick:function onClick(){return setModalShow(true);},children:\"Open\"}),requests.length>0&&email===currentUser.email&&/*#__PURE__*/_jsxs(\"div\",{className:\"div\",children:[/*#__PURE__*/_jsx(Card.Header,{children:\"Current requests\"}),/*#__PURE__*/_jsx(ListGroup,{variant:\"flush\",children:requests.map(function(request){return/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsxs(\"h3\",{children:[request.requesterUser.firstName,\"'s request\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Items requested:\",request.reqItem1,\", \",request.reqItem2,\", \",request.reqItem3]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Drop-off location: \",request.reqDropOff]}),request.accepted===true&&/*#__PURE__*/_jsx(\"p\",{children:\" Request has been accepted\"}),request.accepted===false&&/*#__PURE__*/_jsx(\"p\",{children:\" Request has been denied\"}),request.accepted===null&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleAccept(request.requestId);},children:\"Accept request\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleDeny(request.requestId);},children:\"Deny request\"})]})]},request.requestId);})})]}),/*#__PURE__*/_jsx(TripCardModal,{trip:props.trip,requests:props.requests,show:modalShow,onHide:function onHide(){return setModalShow(false);}})]})},_id);}","map":{"version":3,"sources":["/Users/julietgavison/Desktop/potatoes-front/src/components/TripCard/TripCard.jsx"],"names":["React","useContext","Button","Card","ListGroup","TripCardModal","UserContext","axios","baseURL","TripCard","props","currentUser","useState","modalShow","setModalShow","trip","_id","area","time","store","quantity","name","requests","date","email","handleAccept","requestId","updateReqObject","acceptRequest","tripId","console","log","sendRequest","handleDeny","put","res","width","length","map","request","requesterUser","firstName","reqItem1","reqItem2","reqItem3","reqDropOff","accepted"],"mappings":"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","sourcesContent":["import React, { useContext } from 'react';\nimport { Button, Card, ListGroup } from 'react-bootstrap';\nimport TripCardModal from '../TripCardModal/TripCardModal';\nimport './tripCard.css';\nimport { UserContext } from '../../contexts/UserContext';\nimport axios from 'axios';\nimport { baseURL } from '../../App';\n\nexport default function TripCard(props) {\n\tconst { currentUser } = useContext(UserContext);\n\n\tconst [modalShow, setModalShow] = React.useState(false);\n\n\tconst {\n\t\t_id,\n\t\tarea,\n\t\ttime,\n\t\tstore,\n\t\tquantity,\n\t\tname,\n\t\trequests,\n\t\tdate,\n\t\temail,\n\t} = props.trip;\n\n\tfunction handleAccept(requestId) {\n\t\tconst updateReqObject = {\n\t\t\tacceptRequest: true,\n\t\t\ttripId: _id,\n\t\t\trequestId: requestId,\n\t\t};\n\t\tconsole.log('object', updateReqObject);\n\t\tsendRequest(updateReqObject);\n\t}\n\n\tfunction handleDeny(requestId) {\n\t\tconst updateReqObject = {\n\t\t\tacceptRequest: false,\n\t\t\ttripId: _id,\n\t\t\trequestId: requestId,\n\t\t};\n\t\tconsole.log('object', updateReqObject);\n\t\tsendRequest(updateReqObject);\n\t}\n\n\tconst sendRequest = async updateReqObject => {\n\t\tconst res = await axios.put(`${baseURL}/api/handleAccept`, updateReqObject);\n\t\tconsole.log(res);\n\t};\n\n\treturn (\n\t\t<Card className='m-3 tripCard' style={{ width: '18rem' }} key={_id}>\n\t\t\t<Card.Body>\n\t\t\t\t<Card.Title>{name}'s trip</Card.Title>\n\t\t\t\t<Card.Subtitle className='mb-2 text-muted'>Area: {area}</Card.Subtitle>\n\t\t\t\t<Card.Text>\n\t\t\t\t\tStore: <b>{store}</b>\n\t\t\t\t</Card.Text>\n\t\t\t\t<Card.Text>\n\t\t\t\t\tTime:\n\t\t\t\t\t<b>\n\t\t\t\t\t\t{time}, {date}\n\t\t\t\t\t</b>\n\t\t\t\t</Card.Text>\n\t\t\t\t<Card.Text>\n\t\t\t\t\tAble to carry: <b>{quantity}</b>\n\t\t\t\t</Card.Text>\n\t\t\t\t<Button className='buttons' onClick={() => setModalShow(true)}>\n\t\t\t\t\tOpen\n\t\t\t\t</Button>\n\n\t\t\t\t{requests.length > 0 && email === currentUser.email && (\n\t\t\t\t\t<div className='div'>\n\t\t\t\t\t\t<Card.Header>Current requests</Card.Header>\n\t\t\t\t\t\t<ListGroup variant='flush'>\n\t\t\t\t\t\t\t{requests.map(request => (\n\t\t\t\t\t\t\t\t<ListGroup.Item key={request.requestId}>\n\t\t\t\t\t\t\t\t\t<h3>{request.requesterUser.firstName}'s request</h3>\n\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\tItems requested:\n\t\t\t\t\t\t\t\t\t\t{request.reqItem1}, {request.reqItem2}, {request.reqItem3}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t<p>Drop-off location: {request.reqDropOff}</p>\n\t\t\t\t\t\t\t\t\t{request.accepted === true && (\n\t\t\t\t\t\t\t\t\t\t<p> Request has been accepted</p>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t{request.accepted === false && (\n\t\t\t\t\t\t\t\t\t\t<p> Request has been denied</p>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t{request.accepted === null && (\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<button onClick={() => handleAccept(request.requestId)}>\n\t\t\t\t\t\t\t\t\t\t\t\tAccept request\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t<button onClick={() => handleDeny(request.requestId)}>\n\t\t\t\t\t\t\t\t\t\t\t\tDeny request\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</ListGroup.Item>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</ListGroup>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t<TripCardModal\n\t\t\t\t\ttrip={props.trip}\n\t\t\t\t\trequests={props.requests}\n\t\t\t\t\tshow={modalShow}\n\t\t\t\t\tonHide={() => setModalShow(false)}\n\t\t\t\t/>\n\t\t\t</Card.Body>\n\t\t</Card>\n\t);\n}\n"]},"metadata":{},"sourceType":"module"}