{"ast":null,"code":"import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/Users/julietgavison/Desktop/potatoes-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/julietgavison/Desktop/potatoes-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/julietgavison/Desktop/potatoes-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState,useContext}from'react';import axios from'axios';import{Row,Form,Button,Col,Toast,ToastBody,ToastHeader}from'react-bootstrap';import TripCard from'../TripCard/TripCard';import{areas}from'../Add-Trip/add-trip';import{baseURL}from'../../App';import'./allTrips.css';import{UserContext}from'../../contexts/UserContext';export default function AllTrips(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),allTrips=_useState2[0],setAllTrips=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),showAllTrips=_useState4[0],setShowAllTrips=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),searchArea=_useState6[0],setSearchArea=_useState6[1];var _useContext=useContext(UserContext),currentUser=_useContext.currentUser;var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),message=_useState8[0],setMessage=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),show=_useState10[0],setShow=_useState10[1];useEffect(function(){handleAllTrips();// eslint-disable-next-line\n},[]);var handleSearchArea=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.next=3;return axios.get(\"\".concat(baseURL,\"/api/alltrips/search?area=\").concat(searchArea));case 3:res=_context.sent;setAllTrips(res.data);case 5:case\"end\":return _context.stop();}}},_callee);}));return function handleSearchArea(_x){return _ref.apply(this,arguments);};}();var handleMyTrips=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();if(!(currentUser.email===undefined)){_context2.next=5;break;}setMessage(\"You aren't logged in!\");_context2.next=9;break;case 5:_context2.next=7;return axios.get(\"\".concat(baseURL,\"/api/alltrips/search?email=\").concat(currentUser.email));case 7:res=_context2.sent;setAllTrips(res.data);case 9:case\"end\":return _context2.stop();}}},_callee2);}));return function handleMyTrips(_x2){return _ref2.apply(this,arguments);};}();var handleAllTrips=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return axios.get(\"\".concat(baseURL,\"/api/alltrips\"));case 2:res=_context3.sent;setAllTrips(res.data);setShowAllTrips(allTrips.reverse());case 5:case\"end\":return _context3.stop();}}},_callee3);}));return function handleAllTrips(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container mb-5 \",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Available Trips\"}),/*#__PURE__*/_jsx(Form,{children:/*#__PURE__*/_jsx(Form.Group,{controlId:\"searchArea\",children:/*#__PURE__*/_jsxs(Row,{className:\"justify-content-md-center\",children:[/*#__PURE__*/_jsx(Col,{xs:true,lg:\"2\",children:/*#__PURE__*/_jsx(Button,{onClick:handleAllTrips,children:\"All Trips\"})}),/*#__PURE__*/_jsx(Col,{xs:true,lg:\"2\",children:/*#__PURE__*/_jsx(Button,{onClick:handleMyTrips,children:\"My Trips\"})}),/*#__PURE__*/_jsx(Col,{md:\"auto\",children:/*#__PURE__*/_jsx(Form.Control,{\"aria-label\":\"Select your area\",style:{width:'200px'},as:\"select\",defaultValue:\"Choose your area\",value:searchArea,required:true,onChange:function onChange(e){return setSearchArea(e.target.value);},children:areas.map(function(area){return/*#__PURE__*/_jsx(\"option\",{area:{area:area},children:area},area.id);})})}),/*#__PURE__*/_jsx(Col,{md:\"auto\",children:/*#__PURE__*/_jsx(Button,{className:\"searchBtn\",onClick:handleSearchArea,type:\"submit\",children:\"Search\"})}),/*#__PURE__*/_jsx(Col,{xs:true,lg:\"2\"})]})})}),message&&/*#__PURE__*/_jsxs(Toast,{onClose:function onClose(){return setShow(false);},show:show,delay:5000,autohide:true,children:[/*#__PURE__*/_jsx(ToastHeader,{children:\"Oops!\"}),/*#__PURE__*/_jsx(ToastBody,{children:message})]}),allTrips&&/*#__PURE__*/_jsx(Row,{className:\"m-3\",children:allTrips.map(function(trip){return/*#__PURE__*/_jsx(TripCard,{trip:trip},trip._id);})}),showAllTrips&&/*#__PURE__*/_jsx(Row,{className:\"m-3\",children:showAllTrips.map(function(trip){return/*#__PURE__*/_jsx(TripCard,{trip:trip},trip._id);})})]})});}","map":{"version":3,"sources":["/Users/julietgavison/Desktop/potatoes-front/src/components/AllTrips/AllTrips.jsx"],"names":["useEffect","useState","useContext","axios","Row","Form","Button","Col","Toast","ToastBody","ToastHeader","TripCard","areas","baseURL","UserContext","AllTrips","allTrips","setAllTrips","showAllTrips","setShowAllTrips","searchArea","setSearchArea","currentUser","message","setMessage","show","setShow","handleAllTrips","handleSearchArea","event","preventDefault","get","res","data","handleMyTrips","e","email","undefined","reverse","width","target","value","map","area","id","trip","_id"],"mappings":"gnBAAA,OAASA,SAAT,CAAoBC,QAApB,CAA8BC,UAA9B,KAAgD,OAAhD,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OACCC,GADD,CAECC,IAFD,CAGCC,MAHD,CAICC,GAJD,CAKCC,KALD,CAMCC,SAND,CAOCC,WAPD,KAQO,iBARP,CASA,MAAOC,CAAAA,QAAP,KAAqB,sBAArB,CACA,OAASC,KAAT,KAAsB,sBAAtB,CACA,OAASC,OAAT,KAAwB,WAAxB,CACA,MAAO,gBAAP,CACA,OAASC,WAAT,KAA4B,4BAA5B,CAEA,cAAe,SAASC,CAAAA,QAAT,EAAoB,eACFd,QAAQ,CAAC,EAAD,CADN,wCAC3Be,QAD2B,eACjBC,WADiB,8BAEMhB,QAAQ,CAAC,EAAD,CAFd,yCAE3BiB,YAF2B,eAEbC,eAFa,8BAGElB,QAAQ,EAHV,yCAG3BmB,UAH2B,eAGfC,aAHe,+BAIVnB,UAAU,CAACY,WAAD,CAJA,CAI1BQ,WAJ0B,aAI1BA,WAJ0B,gBAKJrB,QAAQ,CAAC,EAAD,CALJ,yCAK3BsB,OAL2B,eAKlBC,UALkB,8BAMVvB,QAAQ,CAAC,KAAD,CANE,0CAM3BwB,IAN2B,gBAMrBC,OANqB,gBAQlC1B,SAAS,CAAC,UAAM,CACf2B,cAAc,GACd;AACA,CAHQ,CAGN,EAHM,CAAT,CAKA,GAAMC,CAAAA,gBAAgB,0FAAG,iBAAMC,KAAN,0HACxBA,KAAK,CAACC,cAAN,GADwB,sBAEN3B,CAAAA,KAAK,CAAC4B,GAAN,WACdlB,OADc,sCACsBO,UADtB,EAFM,QAElBY,GAFkB,eAKxBf,WAAW,CAACe,GAAG,CAACC,IAAL,CAAX,CALwB,sDAAH,kBAAhBL,CAAAA,gBAAgB,4CAAtB,CAQA,GAAMM,CAAAA,aAAa,2FAAG,kBAAMC,CAAN,8HACrBA,CAAC,CAACL,cAAF,GADqB,KAEjBR,WAAW,CAACc,KAAZ,GAAsBC,SAFL,2BAEgBb,UAAU,yBAAV,CAFhB,qDAIFrB,CAAAA,KAAK,CAAC4B,GAAN,WACdlB,OADc,uCACuBS,WAAW,CAACc,KADnC,EAJE,QAIdJ,GAJc,gBAOpBf,WAAW,CAACe,GAAG,CAACC,IAAL,CAAX,CAPoB,wDAAH,kBAAbC,CAAAA,aAAa,8CAAnB,CAWA,GAAMP,CAAAA,cAAc,2FAAG,uKACJxB,CAAAA,KAAK,CAAC4B,GAAN,WAAalB,OAAb,kBADI,QAChBmB,GADgB,gBAEtBf,WAAW,CAACe,GAAG,CAACC,IAAL,CAAX,CACAd,eAAe,CAACH,QAAQ,CAACsB,OAAT,EAAD,CAAf,CAHsB,wDAAH,kBAAdX,CAAAA,cAAc,2CAApB,CAMA,mBACC,sCACC,aAAK,SAAS,CAAC,iBAAf,wBACC,uCADD,cAEC,KAAC,IAAD,wBACC,KAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,YAAtB,uBACC,MAAC,GAAD,EAAK,SAAS,CAAC,2BAAf,wBACC,KAAC,GAAD,EAAK,EAAE,KAAP,CAAQ,EAAE,CAAC,GAAX,uBACC,KAAC,MAAD,EAAQ,OAAO,CAAEA,cAAjB,uBADD,EADD,cAKC,KAAC,GAAD,EAAK,EAAE,KAAP,CAAQ,EAAE,CAAC,GAAX,uBACC,KAAC,MAAD,EAAQ,OAAO,CAAEO,aAAjB,sBADD,EALD,cAQC,KAAC,GAAD,EAAK,EAAE,CAAC,MAAR,uBACC,KAAC,IAAD,CAAM,OAAN,EACC,aAAW,kBADZ,CAEC,KAAK,CAAE,CAAEK,KAAK,CAAE,OAAT,CAFR,CAGC,EAAE,CAAC,QAHJ,CAIC,YAAY,CAAC,kBAJd,CAKC,KAAK,CAAEnB,UALR,CAMC,QAAQ,KANT,CAOC,QAAQ,CAAE,kBAAAe,CAAC,QAAId,CAAAA,aAAa,CAACc,CAAC,CAACK,MAAF,CAASC,KAAV,CAAjB,EAPZ,UAQE7B,KAAK,CAAC8B,GAAN,CAAU,SAAAC,IAAI,qBACd,eAAsB,IAAI,CAAE,CAAEA,IAAI,CAAJA,IAAF,CAA5B,UACEA,IADF,EAAaA,IAAI,CAACC,EAAlB,CADc,EAAd,CARF,EADD,EARD,cAwBC,KAAC,GAAD,EAAK,EAAE,CAAC,MAAR,uBACC,KAAC,MAAD,EACC,SAAS,CAAC,WADX,CAEC,OAAO,CAAEhB,gBAFV,CAGC,IAAI,CAAC,QAHN,oBADD,EAxBD,cAgCC,KAAC,GAAD,EAAK,EAAE,KAAP,CAAQ,EAAE,CAAC,GAAX,EAhCD,GADD,EADD,EAFD,CAyCEL,OAAO,eACP,MAAC,KAAD,EACC,OAAO,CAAE,yBAAMG,CAAAA,OAAO,CAAC,KAAD,CAAb,EADV,CAEC,IAAI,CAAED,IAFP,CAGC,KAAK,CAAE,IAHR,CAIC,QAAQ,KAJT,wBAKC,KAAC,WAAD,oBALD,cAMC,KAAC,SAAD,WAAYF,OAAZ,EAND,GA1CF,CAoDEP,QAAQ,eACR,KAAC,GAAD,EAAK,SAAS,CAAC,KAAf,UACEA,QAAQ,CAAC0B,GAAT,CAAa,SAAAG,IAAI,qBACjB,KAAC,QAAD,EAAyB,IAAI,CAAEA,IAA/B,EAAeA,IAAI,CAACC,GAApB,CADiB,EAAjB,CADF,EArDF,CA2DE5B,YAAY,eACZ,KAAC,GAAD,EAAK,SAAS,CAAC,KAAf,UACEA,YAAY,CAACwB,GAAb,CAAiB,SAAAG,IAAI,qBACrB,KAAC,QAAD,EAAyB,IAAI,CAAEA,IAA/B,EAAeA,IAAI,CAACC,GAApB,CADqB,EAArB,CADF,EA5DF,GADD,EADD,CAuEA","sourcesContent":["import { useEffect, useState, useContext } from 'react';\nimport axios from 'axios';\nimport {\n\tRow,\n\tForm,\n\tButton,\n\tCol,\n\tToast,\n\tToastBody,\n\tToastHeader,\n} from 'react-bootstrap';\nimport TripCard from '../TripCard/TripCard';\nimport { areas } from '../Add-Trip/add-trip';\nimport { baseURL } from '../../App';\nimport './allTrips.css';\nimport { UserContext } from '../../contexts/UserContext';\n\nexport default function AllTrips() {\n\tconst [allTrips, setAllTrips] = useState([]);\n\tconst [showAllTrips, setShowAllTrips] = useState([]);\n\tconst [searchArea, setSearchArea] = useState();\n\tconst { currentUser } = useContext(UserContext);\n\tconst [message, setMessage] = useState('');\n\tconst [show, setShow] = useState(false);\n\n\tuseEffect(() => {\n\t\thandleAllTrips();\n\t\t// eslint-disable-next-line\n\t}, []);\n\n\tconst handleSearchArea = async event => {\n\t\tevent.preventDefault();\n\t\tconst res = await axios.get(\n\t\t\t`${baseURL}/api/alltrips/search?area=${searchArea}`\n\t\t);\n\t\tsetAllTrips(res.data);\n\t};\n\n\tconst handleMyTrips = async e => {\n\t\te.preventDefault();\n\t\tif (currentUser.email === undefined) setMessage(`You aren't logged in!`);\n\t\telse {\n\t\t\tconst res = await axios.get(\n\t\t\t\t`${baseURL}/api/alltrips/search?email=${currentUser.email}`\n\t\t\t);\n\t\t\tsetAllTrips(res.data);\n\t\t}\n\t};\n\n\tconst handleAllTrips = async () => {\n\t\tconst res = await axios.get(`${baseURL}/api/alltrips`);\n\t\tsetAllTrips(res.data);\n\t\tsetShowAllTrips(allTrips.reverse());\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<div className='container mb-5 '>\n\t\t\t\t<h1>Available Trips</h1>\n\t\t\t\t<Form>\n\t\t\t\t\t<Form.Group controlId='searchArea'>\n\t\t\t\t\t\t<Row className='justify-content-md-center'>\n\t\t\t\t\t\t\t<Col xs lg='2'>\n\t\t\t\t\t\t\t\t<Button onClick={handleAllTrips}>All Trips</Button>\n\t\t\t\t\t\t\t</Col>\n\n\t\t\t\t\t\t\t<Col xs lg='2'>\n\t\t\t\t\t\t\t\t<Button onClick={handleMyTrips}>My Trips</Button>\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t<Col md='auto'>\n\t\t\t\t\t\t\t\t<Form.Control\n\t\t\t\t\t\t\t\t\taria-label='Select your area'\n\t\t\t\t\t\t\t\t\tstyle={{ width: '200px' }}\n\t\t\t\t\t\t\t\t\tas='select'\n\t\t\t\t\t\t\t\t\tdefaultValue='Choose your area'\n\t\t\t\t\t\t\t\t\tvalue={searchArea}\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\tonChange={e => setSearchArea(e.target.value)}>\n\t\t\t\t\t\t\t\t\t{areas.map(area => (\n\t\t\t\t\t\t\t\t\t\t<option key={area.id} area={{ area }}>\n\t\t\t\t\t\t\t\t\t\t\t{area}\n\t\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</Form.Control>\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t<Col md='auto'>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tclassName='searchBtn'\n\t\t\t\t\t\t\t\t\tonClick={handleSearchArea}\n\t\t\t\t\t\t\t\t\ttype='submit'>\n\t\t\t\t\t\t\t\t\tSearch\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t<Col xs lg='2'></Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</Form.Group>\n\t\t\t\t</Form>\n\n\t\t\t\t{message && (\n\t\t\t\t\t<Toast\n\t\t\t\t\t\tonClose={() => setShow(false)}\n\t\t\t\t\t\tshow={show}\n\t\t\t\t\t\tdelay={5000}\n\t\t\t\t\t\tautohide>\n\t\t\t\t\t\t<ToastHeader>Oops!</ToastHeader>\n\t\t\t\t\t\t<ToastBody>{message}</ToastBody>\n\t\t\t\t\t</Toast>\n\t\t\t\t)}\n\n\t\t\t\t{allTrips && (\n\t\t\t\t\t<Row className='m-3'>\n\t\t\t\t\t\t{allTrips.map(trip => (\n\t\t\t\t\t\t\t<TripCard key={trip._id} trip={trip} />\n\t\t\t\t\t\t))}\n\t\t\t\t\t</Row>\n\t\t\t\t)}\n\t\t\t\t{showAllTrips && (\n\t\t\t\t\t<Row className='m-3'>\n\t\t\t\t\t\t{showAllTrips.map(trip => (\n\t\t\t\t\t\t\t<TripCard key={trip._id} trip={trip} />\n\t\t\t\t\t\t))}\n\t\t\t\t\t</Row>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</>\n\t);\n}\n"]},"metadata":{},"sourceType":"module"}