{"ast":null,"code":"import _objectSpread from\"/Users/julietgavison/Desktop/potatoes-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/Users/julietgavison/Desktop/potatoes-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/julietgavison/Desktop/potatoes-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/julietgavison/Desktop/potatoes-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from'react';import{Button,Form,Row,Col,Modal,Alert}from'react-bootstrap';import'./tripCardModal.css';import{v4 as uuidv4}from'uuid';import axios from'axios';import{UserContext}from'../../contexts/UserContext';import{useHistory}from'react-router-dom';import{baseURL}from'../../App';export default function TripCardModal(props){var history=useHistory();var _useContext=useContext(UserContext),currentUser=_useContext.currentUser;var _props$trip=props.trip,area=_props$trip.area,date=_props$trip.date,time=_props$trip.time,store=_props$trip.store,quantity=_props$trip.quantity,name=_props$trip.name,_id=_props$trip._id;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),reqItem1=_useState2[0],setReqItem1=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),reqItem2=_useState4[0],setReqItem2=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),reqItem3=_useState6[0],setReqItem3=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),reqDropOff=_useState8[0],setReqDropOff=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),error=_useState10[0],setError=_useState10[1];function handleSubmit(){if(!reqItem1||!reqDropOff){setError(true);return;}var userInfo={firstName:currentUser.firstName,lastName:currentUser.lastName,email:currentUser.email,requesterId:currentUser._id,phone:currentUser.phoneNumber};var requestObject={tripId:_id,requestId:uuidv4(),requesterUser:userInfo,reqItem1:reqItem1,reqItem2:reqItem2,reqItem3:reqItem3,reqDropOff:reqDropOff,accepted:null};props.onHide();sendRequest(requestObject);history.push('/alltrips');}var sendRequest=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(requestObject){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.put(\"\".concat(baseURL,\"/api/addRequest\"),requestObject);case 2:case\"end\":return _context.stop();}}},_callee);}));return function sendRequest(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Modal,_objectSpread(_objectSpread({},props),{},{size:\"lg\",\"aria-labelledby\":\"contained-modal-title-vcenter\",centered:true,children:[/*#__PURE__*/_jsxs(Alert,{show:error,variant:\"danger\",onClose:function onClose(){return setError(false);},dismissible:true,children:[/*#__PURE__*/_jsx(Alert.Heading,{children:\"Oh no! You got an error \\uD83D\\uDE40\"}),/*#__PURE__*/_jsx(\"p\",{children:\"You must fill out at least one requested item and your information in order to send a request...\"})]}),/*#__PURE__*/_jsxs(Modal.Header,{children:[/*#__PURE__*/_jsx(Button,{variant:\"light\",type:\"button\",children:\"x\"}),/*#__PURE__*/_jsxs(Modal.Title,{id:\"request-title\",children:[name,\"'s trip in \",/*#__PURE__*/_jsx(\"b\",{children:area})]})]}),/*#__PURE__*/_jsxs(Modal.Body,{children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{children:[\"Store: \",/*#__PURE__*/_jsx(\"b\",{children:store})]}),/*#__PURE__*/_jsxs(Col,{children:[\"Time:\",/*#__PURE__*/_jsxs(\"b\",{children:[time,\", \",date]})]}),/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsxs(\"b\",{children:[\" \",name,\" \"]}),\"can carry\",/*#__PURE__*/_jsxs(\"b\",{children:[\" \",quantity,\" \"]}),\"items\"]})]}),/*#__PURE__*/_jsx(Form,{children:/*#__PURE__*/_jsxs(Form.Group,{id:\"request\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"What do you need?\"}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Form.Control,{type:\"string\",required:true,name:\"reqItem1\",onChange:function onChange(e){return setReqItem1(e.target.value);}})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Form.Control,{type:\"string\",name:\"reqItem2\",onChange:function onChange(e){return setReqItem2(e.target.value);}})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Form.Control,{type:\"string\",name:\"reqItem3\",onChange:function onChange(e){return setReqItem3(e.target.value);}})})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Drop-off location\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"string\",required:true,name:\"reqDropOff\",placeholder:\"Please enter a specific address\",onChange:function onChange(e){return setReqDropOff(e.target.value);}})]}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Button,{onClick:handleSubmit,className:\"request-button\",children:\"Send Request\"})})]})]})})]})]}));}","map":{"version":3,"sources":["/Users/julietgavison/Desktop/potatoes-front/src/components/TripCardModal/TripCardModal.jsx"],"names":["React","useState","useContext","Button","Form","Row","Col","Modal","Alert","v4","uuidv4","axios","UserContext","useHistory","baseURL","TripCardModal","props","history","currentUser","trip","area","date","time","store","quantity","name","_id","reqItem1","setReqItem1","reqItem2","setReqItem2","reqItem3","setReqItem3","reqDropOff","setReqDropOff","error","setError","handleSubmit","userInfo","firstName","lastName","email","requesterId","phone","phoneNumber","requestObject","tripId","requestId","requesterUser","accepted","onHide","sendRequest","push","put","e","target","value"],"mappings":"4tBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,UAA1B,KAA4C,OAA5C,CACA,OAASC,MAAT,CAAiBC,IAAjB,CAAuBC,GAAvB,CAA4BC,GAA5B,CAAiCC,KAAjC,CAAwCC,KAAxC,KAAqD,iBAArD,CACA,MAAO,qBAAP,CACA,OAASC,EAAE,GAAIC,CAAAA,MAAf,KAA6B,MAA7B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,WAAT,KAA4B,4BAA5B,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,OAASC,OAAT,KAAwB,WAAxB,CAEA,cAAe,SAASC,CAAAA,aAAT,CAAuBC,KAAvB,CAA8B,CAC5C,GAAMC,CAAAA,OAAO,CAAGJ,UAAU,EAA1B,CAD4C,gBAEpBX,UAAU,CAACU,WAAD,CAFU,CAEpCM,WAFoC,aAEpCA,WAFoC,iBAGaF,KAAK,CAACG,IAHnB,CAGpCC,IAHoC,aAGpCA,IAHoC,CAG9BC,IAH8B,aAG9BA,IAH8B,CAGxBC,IAHwB,aAGxBA,IAHwB,CAGlBC,KAHkB,aAGlBA,KAHkB,CAGXC,QAHW,aAGXA,QAHW,CAGDC,IAHC,aAGDA,IAHC,CAGKC,GAHL,aAGKA,GAHL,eAKZzB,QAAQ,CAAC,EAAD,CALI,wCAKrC0B,QALqC,eAK3BC,WAL2B,8BAMZ3B,QAAQ,CAAC,EAAD,CANI,yCAMrC4B,QANqC,eAM3BC,WAN2B,8BAOZ7B,QAAQ,CAAC,EAAD,CAPI,yCAOrC8B,QAPqC,eAO3BC,WAP2B,8BAQR/B,QAAQ,CAAC,EAAD,CARA,yCAQrCgC,UARqC,eAQzBC,aARyB,8BASlBjC,QAAQ,CAAC,KAAD,CATU,0CASrCkC,KATqC,gBAS9BC,QAT8B,gBAW5C,QAASC,CAAAA,YAAT,EAAwB,CACvB,GAAI,CAACV,QAAD,EAAa,CAACM,UAAlB,CAA8B,CAC7BG,QAAQ,CAAC,IAAD,CAAR,CACA,OACA,CACD,GAAME,CAAAA,QAAQ,CAAG,CAChBC,SAAS,CAAErB,WAAW,CAACqB,SADP,CAEhBC,QAAQ,CAAEtB,WAAW,CAACsB,QAFN,CAGhBC,KAAK,CAAEvB,WAAW,CAACuB,KAHH,CAIhBC,WAAW,CAAExB,WAAW,CAACQ,GAJT,CAKhBiB,KAAK,CAAEzB,WAAW,CAAC0B,WALH,CAAjB,CAOA,GAAMC,CAAAA,aAAa,CAAG,CACrBC,MAAM,CAAEpB,GADa,CAErBqB,SAAS,CAAErC,MAAM,EAFI,CAGrBsC,aAAa,CAAEV,QAHM,CAIrBX,QAAQ,CAARA,QAJqB,CAKrBE,QAAQ,CAARA,QALqB,CAMrBE,QAAQ,CAARA,QANqB,CAOrBE,UAAU,CAAVA,UAPqB,CAQrBgB,QAAQ,CAAE,IARW,CAAtB,CAUAjC,KAAK,CAACkC,MAAN,GACAC,WAAW,CAACN,aAAD,CAAX,CACA5B,OAAO,CAACmC,IAAR,CAAa,WAAb,EACA,CAED,GAAMD,CAAAA,WAAW,0FAAG,iBAAMN,aAAN,wIACblC,CAAAA,KAAK,CAAC0C,GAAN,WAAavC,OAAb,oBAAuC+B,aAAvC,CADa,uDAAH,kBAAXM,CAAAA,WAAW,4CAAjB,CAIA,mBACC,MAAC,KAAD,gCACKnC,KADL,MAEC,IAAI,CAAC,IAFN,CAGC,kBAAgB,+BAHjB,CAIC,QAAQ,KAJT,wBAKC,MAAC,KAAD,EACC,IAAI,CAAEmB,KADP,CAEC,OAAO,CAAC,QAFT,CAGC,OAAO,CAAE,yBAAMC,CAAAA,QAAQ,CAAC,KAAD,CAAd,EAHV,CAIC,WAAW,KAJZ,wBAKC,KAAC,KAAD,CAAO,OAAP,mDALD,cAMC,uHAND,GALD,cAgBC,MAAC,KAAD,CAAO,MAAP,yBACC,KAAC,MAAD,EAAQ,OAAO,CAAC,OAAhB,CAAwB,IAAI,CAAC,QAA7B,eADD,cAKC,MAAC,KAAD,CAAO,KAAP,EAAa,EAAE,CAAC,eAAhB,WACEX,IADF,4BACkB,mBAAIL,IAAJ,EADlB,GALD,GAhBD,cAyBC,MAAC,KAAD,CAAO,IAAP,yBACC,MAAC,GAAD,yBACC,MAAC,GAAD,mCACQ,mBAAIG,KAAJ,EADR,GADD,cAIC,MAAC,GAAD,iCAEC,qBACED,IADF,MACUD,IADV,GAFD,GAJD,cAUC,MAAC,GAAD,yBACC,yBAAKI,IAAL,OADD,0BACyB,yBAAKD,QAAL,OADzB,WAVD,GADD,cAqCC,KAAC,IAAD,wBACC,MAAC,IAAD,CAAM,KAAN,EAAY,EAAE,CAAC,SAAf,wBACC,KAAC,IAAD,CAAM,KAAN,gCADD,cAEC,MAAC,GAAD,yBACC,KAAC,GAAD,wBACC,KAAC,IAAD,CAAM,OAAN,EACC,IAAI,CAAC,QADN,CAEC,QAAQ,KAFT,CAGC,IAAI,CAAC,UAHN,CAIC,QAAQ,CAAE,kBAAA8B,CAAC,QAAI1B,CAAAA,WAAW,CAAC0B,CAAC,CAACC,MAAF,CAASC,KAAV,CAAf,EAJZ,EADD,EADD,cASC,KAAC,GAAD,wBACC,KAAC,IAAD,CAAM,OAAN,EACC,IAAI,CAAC,QADN,CAEC,IAAI,CAAC,UAFN,CAGC,QAAQ,CAAE,kBAAAF,CAAC,QAAIxB,CAAAA,WAAW,CAACwB,CAAC,CAACC,MAAF,CAASC,KAAV,CAAf,EAHZ,EADD,EATD,cAgBC,KAAC,GAAD,wBACC,KAAC,IAAD,CAAM,OAAN,EACC,IAAI,CAAC,QADN,CAEC,IAAI,CAAC,UAFN,CAGC,QAAQ,CAAE,kBAAAF,CAAC,QAAItB,CAAAA,WAAW,CAACsB,CAAC,CAACC,MAAF,CAASC,KAAV,CAAf,EAHZ,EADD,EAhBD,GAFD,cA0BC,MAAC,GAAD,yBACC,MAAC,GAAD,yBACC,KAAC,IAAD,CAAM,KAAN,gCADD,cAEC,KAAC,IAAD,CAAM,OAAN,EACC,IAAI,CAAC,QADN,CAEC,QAAQ,KAFT,CAGC,IAAI,CAAC,YAHN,CAIC,WAAW,CAAC,iCAJb,CAKC,QAAQ,CAAE,kBAAAF,CAAC,QAAIpB,CAAAA,aAAa,CAACoB,CAAC,CAACC,MAAF,CAASC,KAAV,CAAjB,EALZ,EAFD,GADD,cAWC,KAAC,GAAD,wBACC,KAAC,MAAD,EAAQ,OAAO,CAAEnB,YAAjB,CAA+B,SAAS,CAAC,gBAAzC,0BADD,EAXD,GA1BD,GADD,EArCD,GAzBD,IADD,CAgHA","sourcesContent":["import React, { useState, useContext } from 'react';\nimport { Button, Form, Row, Col, Modal, Alert } from 'react-bootstrap';\nimport './tripCardModal.css';\nimport { v4 as uuidv4 } from 'uuid';\nimport axios from 'axios';\nimport { UserContext } from '../../contexts/UserContext';\nimport { useHistory } from 'react-router-dom';\nimport { baseURL } from '../../App';\n\nexport default function TripCardModal(props) {\n\tconst history = useHistory();\n\tconst { currentUser } = useContext(UserContext);\n\tconst { area, date, time, store, quantity, name, _id } = props.trip;\n\n\tconst [reqItem1, setReqItem1] = useState('');\n\tconst [reqItem2, setReqItem2] = useState('');\n\tconst [reqItem3, setReqItem3] = useState('');\n\tconst [reqDropOff, setReqDropOff] = useState('');\n\tconst [error, setError] = useState(false);\n\n\tfunction handleSubmit() {\n\t\tif (!reqItem1 || !reqDropOff) {\n\t\t\tsetError(true);\n\t\t\treturn;\n\t\t}\n\t\tconst userInfo = {\n\t\t\tfirstName: currentUser.firstName,\n\t\t\tlastName: currentUser.lastName,\n\t\t\temail: currentUser.email,\n\t\t\trequesterId: currentUser._id,\n\t\t\tphone: currentUser.phoneNumber,\n\t\t};\n\t\tconst requestObject = {\n\t\t\ttripId: _id,\n\t\t\trequestId: uuidv4(),\n\t\t\trequesterUser: userInfo,\n\t\t\treqItem1,\n\t\t\treqItem2,\n\t\t\treqItem3,\n\t\t\treqDropOff,\n\t\t\taccepted: null,\n\t\t};\n\t\tprops.onHide();\n\t\tsendRequest(requestObject);\n\t\thistory.push('/alltrips');\n\t}\n\n\tconst sendRequest = async requestObject => {\n\t\tawait axios.put(`${baseURL}/api/addRequest`, requestObject);\n\t};\n\n\treturn (\n\t\t<Modal\n\t\t\t{...props}\n\t\t\tsize='lg'\n\t\t\taria-labelledby='contained-modal-title-vcenter'\n\t\t\tcentered>\n\t\t\t<Alert\n\t\t\t\tshow={error}\n\t\t\t\tvariant='danger'\n\t\t\t\tonClose={() => setError(false)}\n\t\t\t\tdismissible>\n\t\t\t\t<Alert.Heading>Oh no! You got an error 🙀</Alert.Heading>\n\t\t\t\t<p>\n\t\t\t\t\tYou must fill out at least one requested item and your information in\n\t\t\t\t\torder to send a request...\n\t\t\t\t</p>\n\t\t\t</Alert>\n\t\t\t<Modal.Header>\n\t\t\t\t<Button variant='light' type='button'>\n\t\t\t\t\tx\n\t\t\t\t</Button>\n\n\t\t\t\t<Modal.Title id='request-title'>\n\t\t\t\t\t{name}'s trip in <b>{area}</b>\n\t\t\t\t</Modal.Title>\n\t\t\t</Modal.Header>\n\t\t\t<Modal.Body>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col>\n\t\t\t\t\t\tStore: <b>{store}</b>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col>\n\t\t\t\t\t\tTime:\n\t\t\t\t\t\t<b>\n\t\t\t\t\t\t\t{time}, {date}\n\t\t\t\t\t\t</b>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col>\n\t\t\t\t\t\t<b> {name} </b>can carry<b> {quantity} </b>items\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t{/* {requests.length > 0 && (\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<ListGroup variant='flush'>\n\t\t\t\t\t\t\t{requests.map(request => (\n\t\t\t\t\t\t\t\t<ListGroup.Item key={request.requestId}>\n\t\t\t\t\t\t\t\t\t<h3>{request.requesterUser.firstName}'s request</h3>\n\t\t\t\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t\t\t\t<Col>\n\t\t\t\t\t\t\t\t\t\t\tItems requested: {request.reqItem1}, {request.reqItem2},\n\t\t\t\t\t\t\t\t\t\t\t{request.reqItem3}\n\t\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t\t<Col>Drop-off: {request.reqDropOff}</Col>\n\t\t\t\t\t\t\t\t\t\t<Col>\n\t\t\t\t\t\t\t\t\t\t\t{request.accepted && <p> Request has been accepted</p>}\n\t\t\t\t\t\t\t\t\t\t\t{!request.accepted && <Button>Help this potato</Button>}\n\t\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t\t</ListGroup.Item>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</ListGroup>\n\t\t\t\t\t</Row>\n\t\t\t\t)} */}\n\t\t\t\t<Form>\n\t\t\t\t\t<Form.Group id='request'>\n\t\t\t\t\t\t<Form.Label>What do you need?</Form.Label>\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<Col>\n\t\t\t\t\t\t\t\t<Form.Control\n\t\t\t\t\t\t\t\t\ttype='string'\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\tname='reqItem1'\n\t\t\t\t\t\t\t\t\tonChange={e => setReqItem1(e.target.value)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t<Col>\n\t\t\t\t\t\t\t\t<Form.Control\n\t\t\t\t\t\t\t\t\ttype='string'\n\t\t\t\t\t\t\t\t\tname='reqItem2'\n\t\t\t\t\t\t\t\t\tonChange={e => setReqItem2(e.target.value)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t<Col>\n\t\t\t\t\t\t\t\t<Form.Control\n\t\t\t\t\t\t\t\t\ttype='string'\n\t\t\t\t\t\t\t\t\tname='reqItem3'\n\t\t\t\t\t\t\t\t\tonChange={e => setReqItem3(e.target.value)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<Col>\n\t\t\t\t\t\t\t\t<Form.Label>Drop-off location</Form.Label>\n\t\t\t\t\t\t\t\t<Form.Control\n\t\t\t\t\t\t\t\t\ttype='string'\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\tname='reqDropOff'\n\t\t\t\t\t\t\t\t\tplaceholder='Please enter a specific address'\n\t\t\t\t\t\t\t\t\tonChange={e => setReqDropOff(e.target.value)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t<Col>\n\t\t\t\t\t\t\t\t<Button onClick={handleSubmit} className='request-button'>\n\t\t\t\t\t\t\t\t\tSend Request\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</Form.Group>\n\t\t\t\t</Form>\n\t\t\t</Modal.Body>\n\t\t</Modal>\n\t);\n}\n"]},"metadata":{},"sourceType":"module"}