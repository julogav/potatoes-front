{"ast":null,"code":"import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/Users/julietgavison/Desktop/potatoes-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/julietgavison/Desktop/potatoes-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/julietgavison/Desktop/potatoes-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{Modal,Button,Form}from'react-bootstrap';import{useHistory}from'react-router-dom';import axios from'axios';import{useContext}from'react';import{UserContext}from'../contexts/UserContext';export default function ModalLogIn(){var _useContext=useContext(UserContext),setCurrentUser=_useContext.setCurrentUser;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),modalLogIn=_useState2[0],setModalLogIn=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),email=_useState6[0],setEmail=_useState6[1];var history=useHistory();var openModalLogIn=function openModalLogIn(){return setModalLogIn(true);};var handleClose=function handleClose(){return setModalLogIn(false);};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var response,logIn;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.next=3;return axios.post('http://localhost:5000/api/users/login',{email:email,password:password});case 3:response=_context.sent;_context.next=6;return axios.post('http://localhost:5000/api/users/login',{email:email,password:password});case 6:logIn=_context.sent;if(logIn.status===200){localStorage.setItem('token',response.data);}console.log('login',logIn);setModalLogIn(false);history.push('/');setCurrentUser(logIn.data);localStorage.setItem('user',JSON.stringify(logIn.data));window.location.reload();case 14:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Button,{className:\"buttons-login-signup button btn btn-secondary my-2 my-sm-0 mx-3\",type:\"button\",onClick:openModalLogIn,children:[' ',\"Log In\",' ']}),/*#__PURE__*/_jsxs(Modal,{show:modalLogIn,onHide:handleClose,children:[/*#__PURE__*/_jsxs(Modal.Header,{children:[/*#__PURE__*/_jsx(Modal.Title,{children:\"Log In\"}),/*#__PURE__*/_jsx(Button,{variant:\"light\",onClick:handleClose,type:\"button\",children:\"x\"})]}),/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Form.Group,{id:\"email\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",value:email,required:true,onChange:function onChange(event){return setEmail(event.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{id:\"password\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",value:password,required:true,onChange:function onChange(event){return setPassword(event.target.value);}})]}),/*#__PURE__*/_jsxs(Button,{onClick:handleSubmit,className:\"button w-100\",type:\"submit\",children:[\"Log In\",' ']})]})})]})]});}","map":{"version":3,"sources":["/Users/julietgavison/Desktop/potatoes-front/src/components/ModalLogIn.jsx"],"names":["React","useState","Modal","Button","Form","useHistory","axios","useContext","UserContext","ModalLogIn","setCurrentUser","modalLogIn","setModalLogIn","password","setPassword","email","setEmail","history","openModalLogIn","handleClose","handleSubmit","event","preventDefault","post","response","logIn","status","localStorage","setItem","data","console","log","push","JSON","stringify","window","location","reload","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { Modal, Button, Form } from 'react-bootstrap';\nimport { useHistory } from 'react-router-dom';\nimport axios from 'axios';\nimport { useContext } from 'react';\nimport { UserContext } from '../contexts/UserContext';\n\nexport default function ModalLogIn() {\n\tconst { setCurrentUser } = useContext(UserContext);\n\n\tconst [modalLogIn, setModalLogIn] = useState(false);\n\tconst [password, setPassword] = useState();\n\tconst [email, setEmail] = useState();\n\tconst history = useHistory();\n\n\tconst openModalLogIn = () => setModalLogIn(true);\n\n\tconst handleClose = () => setModalLogIn(false);\n\n\tconst handleSubmit = async event => {\n\t\tevent.preventDefault();\n\t\tconst response = await axios.post('http://localhost:5000/api/users/login', {\n\t\t\temail: email,\n\t\t\tpassword: password,\n\t\t});\n\n\t\tconst logIn = await axios.post('http://localhost:5000/api/users/login', {\n\t\t\temail: email,\n\t\t\tpassword: password,\n\t\t});\n\t\tif (logIn.status === 200) {\n\t\t\tlocalStorage.setItem('token', response.data);\n\t\t}\n\t\tconsole.log('login', logIn);\n\t\tsetModalLogIn(false);\n\t\thistory.push('/');\n\n\t\tsetCurrentUser(logIn.data);\n\t\tlocalStorage.setItem('user', JSON.stringify(logIn.data));\n\t\twindow.location.reload();\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<Button\n\t\t\t\tclassName='buttons-login-signup button btn btn-secondary my-2 my-sm-0 mx-3'\n\t\t\t\ttype='button'\n\t\t\t\tonClick={openModalLogIn}>\n\t\t\t\t{' '}\n\t\t\t\tLog In{' '}\n\t\t\t</Button>\n\n\t\t\t<Modal show={modalLogIn} onHide={handleClose}>\n\t\t\t\t<Modal.Header>\n\t\t\t\t\t<Modal.Title>Log In</Modal.Title>\n\t\t\t\t\t<Button variant='light' onClick={handleClose} type='button'>\n\t\t\t\t\t\tx\n\t\t\t\t\t</Button>\n\t\t\t\t</Modal.Header>\n\t\t\t\t<Modal.Body>\n\t\t\t\t\t<Form onSubmit={handleSubmit}>\n\t\t\t\t\t\t<Form.Group id='email'>\n\t\t\t\t\t\t\t<Form.Label>Email</Form.Label>\n\t\t\t\t\t\t\t<Form.Control\n\t\t\t\t\t\t\t\ttype='email'\n\t\t\t\t\t\t\t\tvalue={email}\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\tonChange={event => setEmail(event.target.value)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t\t<Form.Group id='password'>\n\t\t\t\t\t\t\t<Form.Label>Password</Form.Label>\n\t\t\t\t\t\t\t<Form.Control\n\t\t\t\t\t\t\t\ttype='password'\n\t\t\t\t\t\t\t\tvalue={password}\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\tonChange={event => setPassword(event.target.value)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={handleSubmit}\n\t\t\t\t\t\t\tclassName='button w-100'\n\t\t\t\t\t\t\ttype='submit'>\n\t\t\t\t\t\t\tLog In{' '}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Form>\n\t\t\t\t</Modal.Body>\n\t\t\t</Modal>\n\t\t</>\n\t);\n}\n"]},"metadata":{},"sourceType":"module"}